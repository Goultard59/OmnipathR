<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Builds all prior knowledge data required by NicheNet. For this it calls
a multitude of methods to download and combine data from various
databases according to the settings. The content of the prior knowledge
data is highly customizable, see the documentation of the related
functions. After the prior knowledge is ready, it performs parameter
optimization to build a NicheNet model. This results a weighted ligand-
target matrix. Then, considering the expressed genes from user provided
data, a gene set of interest and background genes, it executes the
NicheNet ligand activity analysis."><title>Executes the full NicheNet pipeline — nichenet_main • OmnipathR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.5.1/tabs.js"></script><script src="../deps/bs3compat-0.2.5.1/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Executes the full NicheNet pipeline — nichenet_main"><meta property="og:description" content="Builds all prior knowledge data required by NicheNet. For this it calls
a multitude of methods to download and combine data from various
databases according to the settings. The content of the prior knowledge
data is highly customizable, see the documentation of the related
functions. After the prior knowledge is ready, it performs parameter
optimization to build a NicheNet model. This results a weighted ligand-
target matrix. Then, considering the expressed genes from user provided
data, a gene set of interest and background genes, it executes the
NicheNet ligand activity analysis."><meta property="og:image" content="https://saezlab.github.io/OmnipathR/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119440867-10"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119440867-10');
</script></head><body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">OmnipathR</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-default d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Released version">3.1.2</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/bioc_workshop.html">OmniPath Bioconductor workshop</a>
    <a class="dropdown-item" href="../articles/drug_targets.html">Building protein networks around drug-targets using OmnipathR</a>
    <a class="dropdown-item" href="../articles/gene_ontology.html">Gene Ontology in OmnipathR</a>
    <a class="dropdown-item" href="../articles/nichenet.html">Using NicheNet with OmnipathR</a>
    <a class="dropdown-item" href="../articles/omnipath_intro.html">OmnipathR: an R client for the OmniPath web service</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control mr-sm-2" aria-label="Search" name="search-input" data-search-index="/search.json" id="search-input" placeholder="Search..." autocomplete="off"></form>

      <ul class="navbar-nav ml-1"><li class="nav-item">
  <a class="nav-link" href="https://github.com/saezlab/OmnipathR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://twitter.com/omnipathdb">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://omnipathdb.org/">
    <span class="fas fa fas fa-university"></span>
     
  </a>
</li>
      </ul></div>
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <div class="col-md-9 contents">
    <img src="../package-logo.png" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
    <h1 class="display-4">Executes the full NicheNet pipeline</h1>
    <small class="dont-index">Source: <a href="https://github.com/saezlab/OmnipathR/blob/master/R/nichenet.R"><code>R/nichenet.R</code></a></small>
    <div class="d-none name"><code>nichenet_main.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Builds all prior knowledge data required by NicheNet. For this it calls
a multitude of methods to download and combine data from various
databases according to the settings. The content of the prior knowledge
data is highly customizable, see the documentation of the related
functions. After the prior knowledge is ready, it performs parameter
optimization to build a NicheNet model. This results a weighted ligand-
target matrix. Then, considering the expressed genes from user provided
data, a gene set of interest and background genes, it executes the
NicheNet ligand activity analysis.</p>
    </div>

    <div id="ref-usage" class="ref-usage section level2 sourceCode">
    <pre class="sourceCode r"><code><span class="fu">nichenet_main</span><span class="op">(</span>
  only_omnipath <span class="op">=</span> <span class="cn">FALSE</span>,
  expressed_genes_transmitter <span class="op">=</span> <span class="cn">NULL</span>,
  expressed_genes_receiver <span class="op">=</span> <span class="cn">NULL</span>,
  genes_of_interest <span class="op">=</span> <span class="cn">NULL</span>,
  background_genes <span class="op">=</span> <span class="cn">NULL</span>,
  use_weights <span class="op">=</span> <span class="cn">TRUE</span>,
  n_top_ligands <span class="op">=</span> <span class="fl">42</span>,
  n_top_targets <span class="op">=</span> <span class="fl">250</span>,
  signaling_network <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>,
  lr_network <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>,
  gr_network <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>,
  small <span class="op">=</span> <span class="cn">FALSE</span>,
  tiny <span class="op">=</span> <span class="cn">FALSE</span>,
  make_multi_objective_function_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>,
  objective_function_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>,
  mlrmbo_optimization_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>,
  construct_ligand_target_matrix_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>,
  results_dir <span class="op">=</span> <span class="cn">NULL</span>,
  quality_filter_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span></code></pre>
    </div>

    <h2>Arguments</h2>
    <dl class="row" id="ref-arguments"><dt class="col-sm-3 section level2" id="pkg-arg-only_omnipath">only_omnipath</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Logical: use only OmniPath for network knowledge.
This is a simple switch for convenience, further options are available
by the other arguments. By default we use all available resources.
The networks can be customized on a resource by resource basis, as
well as providing custom parameters for individual resources, using
the parameters `signaling_network`, `lr_network` and `gr_network`.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-expressed_genes_transmitter">expressed_genes_transmitter</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Character vector with the gene symbols
of the genes expressed in the cells transmitting the signal.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-expressed_genes_receiver">expressed_genes_receiver</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Character vector with the gene symbols
of the genes expressed in the cells receiving the signal.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-genes_of_interest">genes_of_interest</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Character vector with the gene symbols of the
genes of interest. These are the genes in the receiver cell population
that are potentially affected by ligands expressed by interacting
cells (e.g. genes differentially expressed upon cell-cell interaction).</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-background_genes">background_genes</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Character vector with the gene symbols of the
genes to be used as background.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-use_weights">use_weights</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Logical: calculate and use optimized weights for
resources (i.e. one resource seems to be better than another, hence
the former is considered with a higher weight).</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-n_top_ligands">n_top_ligands</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>How many of the top ligands to include in the
ligand-target table.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-n_top_targets">n_top_targets</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>How many of the top targets (for each of the top
ligands) to consider in the ligand-target table.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-signaling_network">signaling_network</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>A list of parameters for building the signaling
network, passed to <code><a href="nichenet_signaling_network.html">nichenet_signaling_network</a></code>.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-lr_network">lr_network</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>A list of parameters for building the ligand-receptor
network, passed to <code><a href="nichenet_lr_network.html">nichenet_lr_network</a></code>.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-gr_network">gr_network</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>A list of parameters for building the gene regulatory
network, passed to <code><a href="nichenet_gr_network.html">nichenet_gr_network</a></code>.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-small">small</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Logical: build a small network for testing purposes, using
only OmniPath data. It is also a high quality network, it is
reasonable to try the analysis with this small network.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-tiny">tiny</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Logical: build an even smaller network for testing
purposes. As this involves random subsetting, it's not recommended
to use this network for analysis.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-make_multi_objective_function_param">make_multi_objective_function_param</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Override parameters for
<code><a href="https://rdrr.io/pkg/smoof/man/makeMultiObjectiveFunction.html">smoof::makeMultiObjectiveFunction</a></code>.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-objective_function_param">objective_function_param</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Override additional arguments passed to
the objective function.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-mlrmbo_optimization_param">mlrmbo_optimization_param</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Override arguments for
<code><a href="https://rdrr.io/pkg/nichenetr/man/mlrmbo_optimization.html">nichenetr::mlrmbo_optimization</a></code>.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-construct_ligand_target_matrix_param">construct_ligand_target_matrix_param</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Override parameters for
<code><a href="https://rdrr.io/pkg/nichenetr/man/construct_ligand_target_matrix.html">nichenetr::construct_ligand_target_matrix</a></code>.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-results_dir">results_dir</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Character: path to the directory to save intermediate
and final outputs from NicheNet methods.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-quality_filter_param">quality_filter_param</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Arguments for <code>
<a href="filter_intercell_network.html">filter_intercell_network</a></code> (quality filtering of the OmniPath
ligand-receptor network). It is recommended to check these parameters
and apply some quality filtering. The defaults already ensure certain
filtering, but you might want more relaxed or stringent options.</p></dd>
    </dl><div class="ref-section section level2" id="section-value">
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value" aria-hidden="true"></a>Value</h2>

    <p>A named list with the intermediate and final outputs of the
    pipeline: `networks`, `expression`, `optimized_parameters`,
    `weighted_networks` and `ligand_target_matrix`.</p>
    </div>
    <div class="ref-section section level2" id="section-details">
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details" aria-hidden="true"></a>Details</h2>

    <p>About <em>small</em> and <em>tiny</em> networks: Building a NicheNet model
is computationally demanding, taking several hours to run. As this is
related to the enormous size of the networks, to speed up testing we can
use smaller networks, around 1,000 times smaller, with few thousands of
interactions instead of few millions. Random subsetting of the whole
network would result disjunct fragments, instead we load only a few
resources. To run the whole pipeline with tiny networks use <code>
<a href="nichenet_test.html">nichenet_test</a></code>.</p>
    </div>
    <div class="ref-section section level2" id="section-see-also">
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also" aria-hidden="true"></a>See also</h2>

    <div class="dont-index">
<ul><li><p><code><a href="nichenet_networks.html">nichenet_networks</a></code></p></li>
<li><p><code><a href="nichenet_signaling_network.html">nichenet_signaling_network</a></code></p></li>
<li><p><code><a href="nichenet_lr_network.html">nichenet_lr_network</a></code></p></li>
<li><p><code><a href="nichenet_gr_network.html">nichenet_gr_network</a></code></p></li>
<li><p><code><a href="nichenet_test.html">nichenet_test</a></code></p></li>
<li><p><code><a href="nichenet_workarounds.html">nichenet_workarounds</a></code></p></li>
<li><p><code><a href="nichenet_results_dir.html">nichenet_results_dir</a></code></p></li>
</ul></div>
    </div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples" aria-hidden="true"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="va">nichenet_results</span> <span class="op">&lt;-</span> <span class="fu">nichenet_main</span><span class="op">(</span></span>
<span class="r-in">    <span class="co"># altering some network resource parameters, the rest</span></span>
<span class="r-in">    <span class="co"># of the resources will be loaded according to the defaults</span></span>
<span class="r-in">    signaling_network <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span class="r-in">        cpdb <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># this resource will be excluded</span></span>
<span class="r-in">        inbiomap <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span class="r-in">        evex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>min_confidence <span class="op">=</span> <span class="fl">1.0</span><span class="op">)</span> <span class="co"># override some parameters</span></span>
<span class="r-in">    <span class="op">)</span>,</span>
<span class="r-in">    gr_network <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>only_omnipath <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span class="r-in">    n_top_ligands <span class="op">=</span> <span class="fl">20</span>,</span>
<span class="r-in">    <span class="co"># override the default number of CPU cores to use</span></span>
<span class="r-in">    mlrmbo_optimization_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ncores <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="sticky-top">
    <nav id="toc"><h2 data-toc-skip>Contents</h2>

    </nav></div>
  </div>
</div>


      <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Alberto Valdeolivas, Denes Turei, Attila Gabor.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer></div>

  

  

  </body></html>

